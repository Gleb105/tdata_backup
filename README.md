# Telegram tdata Backup Utility

"Утилита для резервного копирования папки tdata Telegram Desktop с автоматической архивацией, разбиением на части и отправкой всех частей через Telegram-бота в личные сообщения."

---

## Возможности
- Автоматический поиск папки tdata (Telegram Desktop) в системе
- Завершение всех процессов Telegram перед копированием
- Архивация содержимого tdata (кроме файла `working`)
- Разделение архива на части по 49 МБ (лимит Telegram)
- Отправка всех частей архива через Telegram-бота в чат (каждая часть — отдельным сообщением)
- Перед отправкой — уведомление с информацией о пользователе, размере архива и количестве частей
- После отправки — сообщение о завершении и лог-файл выполнения
- После успешной отправки — автоматическое удаление архива, частей, tdata и лог-файла
- Подробное логирование всех этапов

---

## Как использовать

### 1. Настройка Telegram-бота
- Создайте Telegram-бота через [@BotFather](https://t.me/BotFather)
- Получите токен бота
- Получите свой chat_id (например, через [@userinfobot](https://t.me/userinfobot) или с помощью любого Telegram-бота)
- Впишите токен и chat_id в переменные в начале файла `main.py`:
  ```python
  TELEGRAM_BOT_TOKEN = 'ВАШ_ТОКЕН'
  TELEGRAM_CHAT_ID = 'ВАШ_CHAT_ID'
  ```

### 2. Установка зависимостей

Создайте файл `requirements.txt` со следующим содержимым:
```txt
requests
psutil
```
Установите зависимости:
```bash
pip install -r requirements.txt
```

### 3. Сборка exe (опционально)

Для сборки в exe используйте команду:
```bash
pyinstaller --onefile --noconsole --icon=src/icon.ico main.py
```
- Можно использовать любую .ico иконку по желанию
- Готовый exe будет лежать в папке `dist`

### 4. Запуск
- Запустите скрипт (или exe) на том компьютере, где установлен Telegram Desktop
- Утилита сама найдёт папку tdata, завершит процессы Telegram, создаст архив, разобьёт его на части и отправит все части в ваш Telegram через бота
- После завершения вы получите уведомление и лог-файл в Telegram

---

## Важно
- Лимит Telegram на размер файла через бота — 50 МБ, поэтому части по 49 МБ
- После отправки все временные файлы и папка tdata будут удалены!
- Лог-файл создаётся в папке с Telegram и удаляется после отправки
- Для восстановления архива используйте скрипт `joiner.py` (см. в репозитории)

---

## Восстановление архива
1. Скачайте все части архива из Telegram в одну папку
2. Запустите скрипт `joiner.py` в этой папке:
   ```bash
   python joiner.py
   ```
3. Получите файл `data.zip` — его можно распаковать любым архиватором

---

## Требования
- Python 3.7+
- requests
- psutil
- pyinstaller

---

## Автор
- @OneF3M (JW)